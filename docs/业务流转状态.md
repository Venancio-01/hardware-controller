# 弹药柜控制系统逻辑状态表 (详版)

#### 信号定义说明

| 类型 | 标识 | 定义 | 类型 | 标识 | 定义 |
| --- | --- | --- | --- | --- | --- |
| **输入 (Input)** | 1 | 供弹申请 | **输出 (Output)** | 1 | 授权通过 |
|  | 2 | 门磁开关 |  | 2 | 取消报警 |
|  | 3 | 门锁开关 |  | 3 | 授权取消 |
|  | 4 | 钥匙开关 |  | 4 | 报警灯 |
|  | 5 | 报警灯状态 |  | 5 | 开锁 |
|  | 7 | 门状态灯 |  |  |  |
|  | 7 | 设备状态灯 |  |  |  |
|  | 8 | 震动开关 |  |  |  |

---

#### 业务逻辑流转数据

| 类别 | 状态/动作描述 | 1 | 2 | 3 | 4 | 5 | 7 | 7 | 8 | 语音文字 (输入判定) | 1 | 2 | 3 | 4 | 5 | 语音文字 (程序输出) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| - | **初始化** | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | - | 0 | 0 | 0 | 0 | 0 | - |
| **A** | 申请供弹 | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | - | 0 | 0 | 0 | 0 | 0 | - |
|  | 程序判断 | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 申请供弹请授权 | 0 | 0 | 0 | 0 | 0 | 已申请，请等待授权 |
| **B** | 按下授权通过按钮 | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | - | 1 | 0 | 0 | 0 | 0 | - |
|  | 程序判断处理 | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 授权通过，已开锁 | 1 | 0 | 0 | 0 | 1 | 授权通过，已开锁请打开柜门 |
| **A** | 打开柜门取弹 | 1 | 1 | 1 | 0 | 0 | 0 | 0 | 0 | - | 1 | 0 | 0 | 0 | 1 | - |
|  | 程序判断处理 | 1 | 1 | 1 | 0 | 0 | 1 | 0 | 0 | 柜门已打开 | 1 | 0 | 0 | 0 | 0 | 已开门，取弹后关闭柜门，并复位按键 |
| **A** | 关闭柜门并上锁 | 1 | 0 | 0 | 0 | 0 | 1 | 0 | 0 | - | 1 | 0 | 0 | 0 | 0 | - |
|  | 程序判断处理 | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 柜门已关闭请复位供弹申请 | 1 | 0 | 0 | 0 | 0 | 柜门已关闭 |
| **A** | 复位申请按钮 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | - | 1 | 0 | 0 | 0 | 0 | - |
|  | 程序判断处理 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 供弹完毕 | 0 | 0 | 0 | 0 | 0 | 供弹完毕 |
| **B** | 按下授权取消按钮 | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | - | 0 | 0 | 1 | 0 | 0 | - |
|  | 程序判断处理 | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 授权未通过，请取消供弹 | 0 | 0 | 1 | 0 | 0 | 授权未通过，等待取消供弹 |
| **A** | 复位申请按钮 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | - | 0 | 0 | 1 | 0 | 0 | - |
|  | 程序判断处理 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 供弹结束 | 0 | 0 | 0 | 0 | 0 | 供弹结束 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **A** | 钥匙开门 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | 0 | - | 0 | 0 | 0 | 0 | 0 | - |
|  | 程序判断处理 | 0 | 0 | 0 | 1 | 1 | 0 | 0 | 0 | 钥匙开门请核实 | 0 | 0 | 0 | 1 | 0 | 钥匙开门请核实 |
| **B** | 钥匙开门复位 | 0 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | - | 0 | 0 | 0 | 1 | 0 | - |
|  | 程序判断处理 | 0 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | 钥匙已复位，请取消报警 | 0 | 0 | 0 | 1 | 0 | 钥匙已复位，请取消报警 |
| **B** | 取消报警 | 0 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | - | 0 | 1 | 0 | 1 | 0 | - |
|  | 程序判断处理 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 取消报警 | 0 | 0 | 0 | 0 | 0 | 取消报警 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **A** | 柜体震动 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 1 | - | 0 | 0 | 0 | 0 | 0 | - |
|  | 程序判断处理 | 0 | 0 | 0 | 0 | 1 | 0 | 0 | 1 | 柜体震动报警 | 0 | 0 | 0 | 1 | 0 | 柜体震动报警 |
| **B** | 取消报警 | 0 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | - | 0 | 1 | 0 | 1 | 0 | - |
|  | 程序判断处理 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 取消报警 | 0 | 0 | 0 | 0 | 0 | 取消报警 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **C** | **异常监控** |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
|  | 判断设备状态、网络联通、心跳、长期开门未关 | 0 | 0 | 0 | 0 | 1 | 0 | 1 | 0 | - | 0 | 0 | 0 | 1 | 0 | - |
| **B** | 取消报警 | 0 | 0 | 0 | 0 | 1 | 0 | 1 | 0 | - | 0 | 1 | 0 | 1 | 0 | - |
|  | 程序判断处理 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 取消报警 | 0 | 0 | 0 | 0 | 0 | 取消报警 |

---

### 系统逻辑分析总结

1. **正常业务流 (A/B交互)**: 遵循 `申请 -> 授权 -> 操作 -> 复位` 的严格时序。
2. **强制干预流 (钥匙)**: 物理钥匙开门会直接触发报警灯（输出4），并需要人工执行“取消报警”逻辑。
3. **环境触发流 (震动)**: 传感器触发后立即进入报警状态。
4. **后台监控流 (C类)**: 新增了对网络、心跳及“长期开门未关”的自动监控逻辑，体现了系统健壮性设计。
